(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[15],{51340:function(e,t,r){Promise.resolve().then(r.bind(r,68889))},53879:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},37841:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},12882:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]])},70699:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(87461).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},68889:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var s=r(3827),n=r(64090),l=r(47907),o=r(18628),a=r(1221),i=r(58121),c=r(575),d=r(22782),h=r(12647),u=r(3549),x=r(86468),f=r(15671),m=r(77147),p=r(53879),g=r(37841),b=r(70699),j=r(12882),v=r(69475);function w(){let{association:e,isAuthenticated:t,isLoading:r}=(0,o.useAuth)(),w=(0,l.useRouter)(),{toast:y}=(0,m.pm)(),[k,N]=(0,n.useState)(!1),[C,S]=(0,n.useState)(!1),[z,T]=(0,n.useState)({showLogo:!0,showHeader:!0,showFooter:!0,headerText:"",footerText:"",backgroundColor:"#ffffff",textColor:"#1e293b",logoUrl:"",customStyles:""});(0,n.useEffect)(()=>{r||t||w.push("/")},[r,t,w]),(0,n.useEffect)(()=>{e&&T(e.ballotTemplate||{showLogo:!0,showHeader:!0,showFooter:!0,headerText:"",footerText:"",backgroundColor:"#ffffff",textColor:"#1e293b",logoUrl:"",customStyles:""})},[e]);let Z=async()=>{if(e){N(!0);try{let t=(0,i.JU)(a.db,"associations",e.id);await (0,i.r7)(t,{ballotTemplate:z,updatedAt:i.EK.now()}),y({title:"Vorlage gespeichert",description:"Die Stimmzettel-Vorlage wurde aktualisiert."});let r=localStorage.getItem("vereins-wahlen-auth");if(r){let e=JSON.parse(r);e.ballotTemplate=z,localStorage.setItem("vereins-wahlen-auth",JSON.stringify(e))}}catch(e){console.error("Error saving template:",e),y({title:"Fehler",description:"Die Vorlage konnte nicht gespeichert werden.",variant:"destructive"})}finally{N(!1)}}};return r?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-pulse text-slate-500",children:"Laden..."})}):e?(0,s.jsxs)("div",{className:"min-h-screen bg-slate-50",children:[(0,s.jsx)("header",{className:"border-b bg-white sticky top-0 z-50",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[(0,s.jsxs)(c.z,{variant:"ghost",onClick:()=>w.push("/admin"),children:[(0,s.jsx)(p.Z,{className:"h-4 w-4 mr-2"}),"Zur\xfcck zum Dashboard"]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(c.z,{variant:"outline",onClick:()=>S(!C),children:[(0,s.jsx)(g.Z,{className:"h-4 w-4 mr-2"}),C?"Editor":"Vorschau"]}),(0,s.jsxs)(c.z,{onClick:Z,disabled:k,children:[(0,s.jsx)(b.Z,{className:"h-4 w-4 mr-2"}),k?"Speichern...":"Speichern"]})]})]})}),(0,s.jsxs)("main",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[(0,s.jsxs)("div",{className:"mb-8",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-slate-800",children:"Stimmzettel-Vorlage"}),(0,s.jsx)("p",{className:"text-slate-600",children:"Gestalten Sie das Aussehen Ihrer gedruckten Stimmzettel."})]}),C?(0,s.jsxs)(f.Zb,{children:[(0,s.jsxs)(f.Ol,{children:[(0,s.jsxs)(f.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(g.Z,{className:"h-5 w-5"}),"Vorschau"]}),(0,s.jsx)(f.SZ,{children:"So wird der Stimmzettel gedruckt."})]}),(0,s.jsx)(f.aY,{children:(()=>{let e="\n      .ballot-preview {\n        background-color: ".concat(z.backgroundColor,";\n        color: ").concat(z.textColor,";\n        padding: 2rem;\n        border: 2px solid #e2e8f0;\n        border-radius: 8px;\n        max-width: 400px;\n        margin: 0 auto;\n        font-family: Arial, sans-serif;\n        ").concat(z.customStyles,"\n      }\n      .ballot-preview h2 {\n        margin: 0 0 1rem 0;\n        font-size: 1.5rem;\n        font-weight: bold;\n      }\n      .ballot-preview p {\n        margin: 0.5rem 0;\n        line-height: 1.5;\n      }\n      .ballot-preview .qr-section {\n        border-top: 2px solid ").concat(z.textColor,";\n        border-bottom: 2px solid ").concat(z.textColor,";\n        padding: 1rem 0;\n        margin: 1rem 0;\n        text-align: center;\n      }\n      .ballot-preview .footer {\n        font-size: 0.75rem;\n        opacity: 0.7;\n        margin-top: 1rem;\n      }\n    ");return(0,s.jsxs)("div",{className:"ballot-preview",children:[(0,s.jsx)("style",{children:e}),z.showLogo&&(0,s.jsx)("div",{className:"text-center mb-4",children:z.logoUrl?(0,s.jsx)("img",{src:z.logoUrl,alt:"Logo",className:"h-16 mx-auto"}):(0,s.jsx)("div",{className:"h-16 bg-gray-200 rounded flex items-center justify-center text-gray-500",children:"Logo"})}),z.showHeader&&z.headerText&&(0,s.jsx)("div",{className:"text-center mb-4",children:(0,s.jsx)("p",{children:z.headerText})}),(0,s.jsx)("h2",{children:"Beispiel-Wahl"}),(0,s.jsx)("p",{children:"Dies ist eine Beispielabstimmung zur Vorschau der Vorlage."}),(0,s.jsxs)("div",{className:"qr-section",children:[(0,s.jsx)("p",{children:"QR-Code Bereich"}),(0,s.jsx)("div",{className:"bg-gray-200 w-32 h-32 mx-auto rounded flex items-center justify-center",children:"QR"}),(0,s.jsx)("p",{className:"text-sm mt-2",children:"Code: ABCD"})]}),z.showFooter&&z.footerText&&(0,s.jsx)("div",{className:"footer text-center",children:(0,s.jsx)("p",{children:z.footerText})}),(0,s.jsx)("div",{className:"footer text-center",children:(0,s.jsx)("p",{children:"Stimmzettel 1 von 100"})})]})})()})]}):(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,s.jsxs)(f.Zb,{children:[(0,s.jsx)(f.Ol,{children:(0,s.jsxs)(f.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(j.Z,{className:"h-5 w-5"}),"Design-Einstellungen"]})}),(0,s.jsxs)(f.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(h._,{htmlFor:"backgroundColor",children:"Hintergrundfarbe"}),(0,s.jsx)(d.I,{id:"backgroundColor",type:"color",value:z.backgroundColor,onChange:e=>T({...z,backgroundColor:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(h._,{htmlFor:"textColor",children:"Textfarbe"}),(0,s.jsx)(d.I,{id:"textColor",type:"color",value:z.textColor,onChange:e=>T({...z,textColor:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(h._,{htmlFor:"logoUrl",children:"Logo-URL"}),(0,s.jsx)(d.I,{id:"logoUrl",placeholder:"https://example.com/logo.png",value:z.logoUrl,onChange:e=>T({...z,logoUrl:e.target.value})}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"URL zu Ihrem Vereinslogo (optional)"})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(h._,{htmlFor:"showLogo",children:"Logo anzeigen"}),(0,s.jsx)(x.r,{id:"showLogo",checked:z.showLogo,onCheckedChange:e=>T({...z,showLogo:e})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(h._,{htmlFor:"showHeader",children:"Kopfzeile anzeigen"}),(0,s.jsx)(x.r,{id:"showHeader",checked:z.showHeader,onCheckedChange:e=>T({...z,showHeader:e})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)(h._,{htmlFor:"showFooter",children:"Fu\xdfzeile anzeigen"}),(0,s.jsx)(x.r,{id:"showFooter",checked:z.showFooter,onCheckedChange:e=>T({...z,showFooter:e})})]})]})]})]}),(0,s.jsxs)(f.Zb,{children:[(0,s.jsx)(f.Ol,{children:(0,s.jsxs)(f.ll,{className:"flex items-center gap-2",children:[(0,s.jsx)(v.Z,{className:"h-5 w-5"}),"Text-Inhalte"]})}),(0,s.jsxs)(f.aY,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(h._,{htmlFor:"headerText",children:"Kopfzeilentext"}),(0,s.jsx)(u.g,{id:"headerText",placeholder:"Willkommen zur Wahl des Vereins...",value:z.headerText,onChange:e=>T({...z,headerText:e.target.value}),rows:3})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(h._,{htmlFor:"footerText",children:"Fu\xdfzeilentext"}),(0,s.jsx)(u.g,{id:"footerText",placeholder:"Diese Wahl wird anonym durchgef\xfchrt...",value:z.footerText,onChange:e=>T({...z,footerText:e.target.value}),rows:3})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(h._,{htmlFor:"customStyles",children:"Benutzerdefinierte CSS"}),(0,s.jsx)(u.g,{id:"customStyles",placeholder:".custom-class { font-weight: bold; }",value:z.customStyles,onChange:e=>T({...z,customStyles:e.target.value}),rows:6,className:"font-mono text-sm"}),(0,s.jsx)("p",{className:"text-xs text-slate-500",children:"Zus\xe4tzliches CSS f\xfcr erweiterte Anpassungen (f\xfcr Fortgeschrittene)"})]})]})]})]}),!C&&(0,s.jsxs)(f.Zb,{className:"mt-6",children:[(0,s.jsx)(f.Ol,{children:(0,s.jsx)(f.ll,{children:"Hinweise"})}),(0,s.jsxs)(f.aY,{className:"space-y-2 text-sm text-slate-600",children:[(0,s.jsx)("p",{children:"• Die Vorlage wird f\xfcr alle zuk\xfcnftigen Wahlen verwendet"}),(0,s.jsx)("p",{children:"• QR-Codes werden immer gedruckt, Links mit Codes sind optional"}),(0,s.jsx)("p",{children:"• \xc4nderungen wirken sich nur auf neue Wahlen aus"}),(0,s.jsx)("p",{children:"• Verwenden Sie die Vorschau um das Ergebnis zu pr\xfcfen"})]})]})]})]}):null}},86468:function(e,t,r){"use strict";r.d(t,{r:function(){return a}});var s=r(3827),n=r(64090),l=r(94845),o=r(22169);let a=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(l.fC,{className:(0,o.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...n,ref:t,children:(0,s.jsx)(l.bU,{className:(0,o.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});a.displayName=l.fC.displayName},3549:function(e,t,r){"use strict";r.d(t,{g:function(){return o}});var s=r(3827),n=r(64090),l=r(22169);let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("textarea",{className:(0,l.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...n})});o.displayName="Textarea"},94845:function(e,t,r){"use strict";r.d(t,{bU:function(){return k},fC:function(){return y}});var s=r(64090),n=r(44991),l=r(61266),o=r(84104),a=r(9310),i=r(65030),c=r(76769),d=r(92826),h=r(3827),u="Switch",[x,f]=(0,o.b)(u),[m,p]=x(u),g=s.forwardRef((e,t)=>{let{__scopeSwitch:r,name:o,checked:i,defaultChecked:c,required:x,disabled:f,value:p="on",onCheckedChange:g,form:b,...j}=e,[y,k]=s.useState(null),N=(0,l.e)(t,e=>k(e)),C=s.useRef(!1),S=!y||b||!!y.closest("form"),[z,T]=(0,a.T)({prop:i,defaultProp:null!=c&&c,onChange:g,caller:u});return(0,h.jsxs)(m,{scope:r,checked:z,disabled:f,children:[(0,h.jsx)(d.WV.button,{type:"button",role:"switch","aria-checked":z,"aria-required":x,"data-state":w(z),"data-disabled":f?"":void 0,disabled:f,value:p,...j,ref:N,onClick:(0,n.Mj)(e.onClick,e=>{T(e=>!e),S&&(C.current=e.isPropagationStopped(),C.current||e.stopPropagation())})}),S&&(0,h.jsx)(v,{control:y,bubbles:!C.current,name:o,value:p,checked:z,required:x,disabled:f,form:b,style:{transform:"translateX(-100%)"}})]})});g.displayName=u;var b="SwitchThumb",j=s.forwardRef((e,t)=>{let{__scopeSwitch:r,...s}=e,n=p(b,r);return(0,h.jsx)(d.WV.span,{"data-state":w(n.checked),"data-disabled":n.disabled?"":void 0,...s,ref:t})});j.displayName=b;var v=s.forwardRef((e,t)=>{let{__scopeSwitch:r,control:n,checked:o,bubbles:a=!0,...d}=e,u=s.useRef(null),x=(0,l.e)(u,t),f=(0,i.D)(o),m=(0,c.t)(n);return s.useEffect(()=>{let e=u.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(f!==o&&t){let r=new Event("click",{bubbles:a});t.call(e,o),e.dispatchEvent(r)}},[f,o,a]),(0,h.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:o,...d,tabIndex:-1,ref:x,style:{...d.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function w(e){return e?"checked":"unchecked"}v.displayName="SwitchBubbleInput";var y=g,k=j},65030:function(e,t,r){"use strict";r.d(t,{D:function(){return n}});var s=r(64090);function n(e){let t=s.useRef({value:e,previous:e});return s.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}},76769:function(e,t,r){"use strict";r.d(t,{t:function(){return l}});var s=r(64090),n=r(32618);function l(e){let[t,r]=s.useState(void 0);return(0,n.b)(()=>{if(e){r({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let s,n;if(!Array.isArray(t)||!t.length)return;let l=t[0];if("borderBoxSize"in l){let e=l.borderBoxSize,t=Array.isArray(e)?e[0]:e;s=t.inlineSize,n=t.blockSize}else s=e.offsetWidth,n=e.offsetHeight;r({width:s,height:n})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}r(void 0)},[e]),t}}},function(e){e.O(0,[358,315,581,995,20,971,69,744],function(){return e(e.s=51340)}),_N_E=e.O()}]);