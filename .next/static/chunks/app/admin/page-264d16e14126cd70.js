(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3],{1244:function(e,t,n){Promise.resolve().then(n.bind(n,63517))},63517:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return K}});var s=n(3827),i=n(64090),a=n(24232),r=n(47907),o=n(18628),l=n(1221),d=n(58121),c=n(575),u=n(22782),m=n(12647),h=n(3549),x=n(86468),f=n(15671),p=n(78820),g=n(52235),v=n(22169);let b=p.fC,j=p.xz,y=p.h_;p.x8;let w=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,s.jsx)(p.aV,{ref:t,className:(0,v.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...i})});w.displayName=p.aV.displayName;let N=i.forwardRef((e,t)=>{let{className:n,children:i,...a}=e;return(0,s.jsxs)(y,{children:[(0,s.jsx)(w,{}),(0,s.jsxs)(p.VY,{ref:t,className:(0,v.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...a,children:[i,(0,s.jsxs)(p.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(g.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Schlie\xdfen"})]})]})]})});N.displayName=p.VY.displayName;let k=e=>{let{className:t,...n}=e;return(0,s.jsx)("div",{className:(0,v.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...n})};k.displayName="DialogHeader";let z=e=>{let{className:t,...n}=e;return(0,s.jsx)("div",{className:(0,v.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...n})};z.displayName="DialogFooter";let S=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,s.jsx)(p.Dx,{ref:t,className:(0,v.cn)("text-lg font-semibold leading-none tracking-tight",n),...i})});S.displayName=p.Dx.displayName;let C=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,s.jsx)(p.dk,{ref:t,className:(0,v.cn)("text-sm text-muted-foreground",n),...i})});C.displayName=p.dk.displayName;var I=n(77147),D=n(17892),T=n(29910),A=n(81049),W=n(70094),E=n(50489),V=n(18727),_=n(97307),O=n(34059),Z=n(57976),L=n(37841),R=n(63915),F=n(22071);let q=(0,a.default)(()=>Promise.all([n.e(363),n.e(606),n.e(737)]).then(n.bind(n,14990)).then(e=>e.default),{loadableGenerated:{webpack:()=>[14990]},ssr:!1,loading:()=>(0,s.jsx)("div",{className:"border border-slate-200 rounded-lg h-[300px] flex items-center justify-center text-slate-500",children:"Laden..."})});function K(){let{association:e,isAuthenticated:t,isLoading:n,logout:a}=(0,o.useAuth)(),p=(0,r.useRouter)(),{toast:g}=(0,I.pm)(),[y,w]=(0,i.useState)([]),[K,B]=(0,i.useState)(!0),[M,P]=(0,i.useState)(!1),[G,Y]=(0,i.useState)(null),[U,J]=(0,i.useState)({title:"",description:"",question:"",options:[{id:"1",text:"",order:0},{id:"2",text:"",order:1}],allowInvalidVotes:!0,electionDate:"",maxVoters:50,invitationText:"Sie sind herzlich eingeladen, an der Abstimmung teilzunehmen. Bitte scannen Sie den QR-Code oder geben Sie den Code auf der Webseite ein.",showLinkWithCode:!1}),[H,X]=(0,i.useState)({showLogo:!0,showHeader:!0,showFooter:!0,headerText:"",footerText:"",backgroundColor:"#ffffff",textColor:"#1e293b",logoUrl:"",customStyles:"",richContent:""});(0,i.useEffect)(()=>{n||t||p.push("/")},[n,t,p]),(0,i.useEffect)(()=>{e&&(Q(),X(e.ballotTemplate||{showLogo:!0,showHeader:!0,showFooter:!0,headerText:"",footerText:"",backgroundColor:"#ffffff",textColor:"#1e293b",logoUrl:"",customStyles:"",richContent:""}))},[e]);let Q=async()=>{if(e)try{let t=(0,d.hJ)(l.db,"elections"),n=(0,d.IO)(t,(0,d.ar)("associationId","==",e.id)),s=await (0,d.PL)(n),i=[];s.forEach(e=>{var t,n,s;let a=e.data(),r={id:e.id,associationId:a.associationId,title:a.title,description:a.description,question:a.question,options:a.options,allowInvalidVotes:a.allowInvalidVotes,electionDate:(null===(t=a.electionDate)||void 0===t?void 0:t.toDate())||new Date,maxVoters:a.maxVoters,invitationText:a.invitationText,showLinkWithCode:a.showLinkWithCode||!1,status:a.status,codesGenerated:a.codesGenerated,createdAt:(null===(n=a.createdAt)||void 0===n?void 0:n.toDate())||new Date,updatedAt:(null===(s=a.updatedAt)||void 0===s?void 0:s.toDate())||new Date};i.push(r)}),w(i.sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()))}catch(e){console.error("Error loading elections:",e),g({title:"Fehler beim Laden",description:"Wahlen konnten nicht geladen werden.",variant:"destructive"})}finally{B(!1)}},$=async()=>{if(e){if(!U.title||!U.question||U.options.some(e=>!e.text)){g({title:"Felder ausf\xfcllen",description:"Bitte f\xfcllen Sie alle Pflichtfelder aus.",variant:"destructive"});return}try{let t={associationId:e.id,title:U.title,description:U.description,question:U.question,options:U.options.map((e,t)=>({...e,order:t})),allowInvalidVotes:U.allowInvalidVotes,electionDate:d.EK.fromDate(new Date(U.electionDate)),maxVoters:U.maxVoters,invitationText:U.invitationText,showLinkWithCode:U.showLinkWithCode,status:"draft",codesGenerated:!1,createdAt:d.EK.now(),updatedAt:d.EK.now()};await (0,d.ET)((0,d.hJ)(l.db,"elections"),t),g({title:"Wahl erstellt",description:"Die Wahl wurde erfolgreich erstellt."}),P(!1),J({title:"",description:"",question:"",options:[{id:"1",text:"",order:0},{id:"2",text:"",order:1}],allowInvalidVotes:!0,electionDate:"",maxVoters:50,invitationText:"Sie sind herzlich eingeladen, an der Abstimmung teilzunehmen. Bitte scannen Sie den QR-Code oder geben Sie den Code auf der Webseite ein.",showLinkWithCode:!1}),Q()}catch(e){console.error("Error creating election:",e),g({title:"Fehler",description:"Die Wahl konnte nicht erstellt werden.",variant:"destructive"})}}},ee=e=>{if(U.options.length<=2)return;let t=U.options.filter((t,n)=>n!==e);J({...U,options:t})},et=(e,t)=>{let n=[...U.options];n[e].text=t,J({...U,options:n})},en=e=>{let t={draft:"bg-slate-100 text-slate-700",active:"bg-green-100 text-green-700",closed:"bg-amber-100 text-amber-700",evaluated:"bg-blue-100 text-blue-700"};return(0,s.jsx)("span",{className:"px-2 py-1 rounded-full text-xs font-medium ".concat(t[e]||t.draft),children:{draft:"Entwurf",active:"Aktiv",closed:"Geschlossen",evaluated:"Ausgewertet"}[e]||e})};return n?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,s.jsx)("div",{className:"animate-pulse text-slate-500",children:"Laden..."})}):t?(0,s.jsxs)("div",{className:"min-h-screen bg-slate-50",children:[(0,s.jsx)("header",{className:"border-b bg-white sticky top-0 z-50",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(D.Z,{className:"h-6 w-6 text-slate-700"}),(0,s.jsx)("span",{className:"font-semibold text-slate-800",children:"Vereins-Wahlen"}),e&&(0,s.jsxs)("span",{className:"text-slate-500 text-sm ml-2",children:["| ",e.name||e.vereinsNummer]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsxs)(c.z,{variant:"ghost",size:"sm",onClick:()=>p.push("/admin/einstellungen"),children:[(0,s.jsx)(T.Z,{className:"h-4 w-4 mr-1"}),"Einstellungen"]}),(0,s.jsxs)(c.z,{variant:"ghost",size:"sm",onClick:()=>{a(),p.push("/")},children:[(0,s.jsx)(A.Z,{className:"h-4 w-4 mr-1"}),"Abmelden"]})]})]})}),(0,s.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold text-slate-800",children:"Wahlen verwalten"}),(0,s.jsx)("p",{className:"text-slate-600",children:"Erstellen und verwalten Sie Ihre Vereinswahlen"})]}),(0,s.jsxs)(b,{open:M,onOpenChange:P,children:[(0,s.jsx)(j,{asChild:!0,children:(0,s.jsxs)(c.z,{children:[(0,s.jsx)(W.Z,{className:"h-4 w-4 mr-2"}),"Neue Wahl erstellen"]})}),(0,s.jsxs)(N,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,s.jsxs)(k,{children:[(0,s.jsx)(S,{children:"Neue Wahl erstellen"}),(0,s.jsx)(C,{children:"Definieren Sie die Wahlfrage und die m\xf6glichen Antworten."})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m._,{htmlFor:"title",children:"Titel der Wahl *"}),(0,s.jsx)(u.I,{id:"title",placeholder:"z.B. Vorstandswahl 2024",value:U.title,onChange:e=>J({...U,title:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m._,{htmlFor:"description",children:"Beschreibung"}),(0,s.jsx)(h.g,{id:"description",placeholder:"Optionale Beschreibung der Wahl",value:U.description,onChange:e=>J({...U,description:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m._,{htmlFor:"question",children:"Wahlfrage *"}),(0,s.jsx)(u.I,{id:"question",placeholder:"z.B. Wen w\xe4hlen Sie zum neuen Vorsitzenden?",value:U.question,onChange:e=>J({...U,question:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m._,{children:"Antwortm\xf6glichkeiten *"}),U.options.map((e,t)=>(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(u.I,{placeholder:"Option ".concat(t+1),value:e.text,onChange:e=>et(t,e.target.value)}),U.options.length>2&&(0,s.jsx)(c.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>ee(t),children:(0,s.jsx)(E.Z,{className:"h-4 w-4 text-slate-500"})})]},e.id)),(0,s.jsxs)(c.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{let e=(U.options.length+1).toString();J({...U,options:[...U.options,{id:e,text:"",order:U.options.length}]})},children:[(0,s.jsx)(W.Z,{className:"h-4 w-4 mr-1"}),"Option hinzuf\xfcgen"]})]}),(0,s.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m._,{htmlFor:"electionDate",children:"Wahldatum *"}),(0,s.jsx)(u.I,{id:"electionDate",type:"datetime-local",value:U.electionDate,onChange:e=>J({...U,electionDate:e.target.value})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m._,{htmlFor:"maxVoters",children:"Maximale Teilnehmer"}),(0,s.jsx)(u.I,{id:"maxVoters",type:"number",min:1,value:U.maxVoters,onChange:e=>J({...U,maxVoters:parseInt(e.target.value)||50})})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m._,{htmlFor:"invitationText",children:"Einladungstext"}),(0,s.jsx)(h.g,{id:"invitationText",placeholder:"Text auf dem Stimmzettel",value:U.invitationText,onChange:e=>J({...U,invitationText:e.target.value}),rows:3})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(m._,{htmlFor:"allowInvalid",children:"Ung\xfcltige Stimmen erlauben"}),(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"Teilnehmer k\xf6nnen ohne Auswahl abstimmen"})]}),(0,s.jsx)(x.r,{id:"allowInvalid",checked:U.allowInvalidVotes,onCheckedChange:e=>J({...U,allowInvalidVotes:e})})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(m._,{htmlFor:"showLinkWithCode",children:"Link mit Code drucken"}),(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"Zus\xe4tzlich zum QR-Code auch Link und Code anzeigen"})]}),(0,s.jsx)(x.r,{id:"showLinkWithCode",checked:U.showLinkWithCode,onCheckedChange:e=>J({...U,showLinkWithCode:e})})]})]}),(0,s.jsxs)("div",{className:"space-y-4 py-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(m._,{className:"text-base font-medium",children:"Stimmzettel-Editor"}),(0,s.jsx)("p",{className:"text-sm text-slate-500",children:"Erstellen Sie Ihren Stimmzettel wie in Word"})]}),(0,s.jsxs)(c.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{let e=U.title.toLowerCase(),t="";t=e.includes("vorsitz")||e.includes("pr\xe4sident")?'\n        <div style="text-align: center; margin-bottom: 30px;">\n          <h1 style="color: #1e293b; font-size: 24px; font-weight: bold; margin-bottom: 10px;">\n            Wahl des Vereinsvorsitzenden\n          </h1>\n          <p style="color: #64748b; font-size: 14px;">\n            '.concat(U.description||"Ihre Stimme ist wichtig f\xfcr die Zukunft unseres Vereins.",'\n          </p>\n        </div>\n        \n        <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin: 20px 0;">\n          <h2 style="color: #1e293b; font-size: 18px; margin-bottom: 15px;">Wahlfrage:</h2>\n          <p style="color: #334155; font-size: 16px; font-weight: 500;">\n            ').concat(U.question,'\n          </p>\n        </div>\n        \n        <div style="margin: 20px 0;">\n          <h3 style="color: #1e293b; font-size: 16px; margin-bottom: 10px;">Kandidaten:</h3>\n          ').concat(U.options.map((e,t)=>'\n            <div style="display: flex; align-items: center; margin: 10px 0; padding: 10px; background: #ffffff; border: 1px solid #e2e8f0; border-radius: 6px;">\n              <span style="display: inline-flex; align-items: center; justify-content: center; width: 30px; height: 30px; background: #3b82f6; color: white; border-radius: 50%; margin-right: 15px; font-weight: bold;">\n                '.concat(t+1,'\n              </span>\n              <span style="color: #1e293b; font-size: 15px;">\n                ').concat(e.text||"Kandidat "+(t+1),"\n              </span>\n            </div>\n          ")).join(""),'\n        </div>\n        \n        <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #e2e8f0;">\n          <p style="color: #64748b; font-size: 12px; text-align: center;">\n            Bitte w\xe4hlen Sie eine Option und geben Sie Ihren Stimmzettel ab.\n          </p>\n        </div>\n      '):e.includes("kassier")||e.includes("schatzmeister")?'\n        <div style="text-align: center; margin-bottom: 30px;">\n          <h1 style="color: #1e293b; font-size: 24px; font-weight: bold; margin-bottom: 10px;">\n            Wahl des Kassierers\n          </h1>\n          <p style="color: #64748b; font-size: 14px;">\n            '.concat(U.description||"Verantwortliche Verwaltung der Vereinsfinanzen",'\n          </p>\n        </div>\n        \n        <div style="background: #fef3c7; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #f59e0b;">\n          <h2 style="color: #92400e; font-size: 18px; margin-bottom: 15px;">Wahlfrage:</h2>\n          <p style="color: #78350f; font-size: 16px; font-weight: 500;">\n            ').concat(U.question,'\n          </p>\n        </div>\n        \n        <div style="margin: 20px 0;">\n          <h3 style="color: #1e293b; font-size: 16px; margin-bottom: 10px;">Kandidaten:</h3>\n          ').concat(U.options.map((e,t)=>'\n            <div style="display: flex; align-items: center; margin: 10px 0; padding: 10px; background: #ffffff; border: 1px solid #e2e8f0; border-radius: 6px;">\n              <span style="display: inline-flex; align-items: center; justify-content: center; width: 30px; height: 30px; background: #f59e0b; color: white; border-radius: 50%; margin-right: 15px; font-weight: bold;">\n                '.concat(t+1,'\n              </span>\n              <span style="color: #1e293b; font-size: 15px;">\n                ').concat(e.text||"Kandidat "+(t+1),"\n              </span>\n            </div>\n          ")).join(""),"\n        </div>\n      "):'\n        <div style="text-align: center; margin-bottom: 30px;">\n          <h1 style="color: #1e293b; font-size: 24px; font-weight: bold; margin-bottom: 10px;">\n            '.concat(U.title,'\n          </h1>\n          <p style="color: #64748b; font-size: 14px;">\n            ').concat(U.description||"Vereinsabstimmung",'\n          </p>\n        </div>\n        \n        <div style="background: #f1f5f9; padding: 20px; border-radius: 8px; margin: 20px 0;">\n          <h2 style="color: #1e293b; font-size: 18px; margin-bottom: 15px;">Wahlfrage:</h2>\n          <p style="color: #334155; font-size: 16px; font-weight: 500;">\n            ').concat(U.question,'\n          </p>\n        </div>\n        \n        <div style="margin: 20px 0;">\n          <h3 style="color: #1e293b; font-size: 16px; margin-bottom: 10px;">Optionen:</h3>\n          ').concat(U.options.map((e,t)=>'\n            <div style="display: flex; align-items: center; margin: 10px 0; padding: 10px; background: #ffffff; border: 1px solid #e2e8f0; border-radius: 6px;">\n              <span style="display: inline-flex; align-items: center; justify-content: center; width: 30px; height: 30px; background: #6366f1; color: white; border-radius: 50%; margin-right: 15px; font-weight: bold;">\n                '.concat(t+1,'\n              </span>\n              <span style="color: #1e293b; font-size: 15px;">\n                ').concat(e.text||"Option "+(t+1),"\n              </span>\n            </div>\n          ")).join(""),"\n        </div>\n      "),X({...H,richContent:t}),g({title:"KI-Design erstellt",description:"Ein professionelles Design wurde generiert."})},disabled:!U.title,children:[(0,s.jsx)(V.Z,{className:"h-4 w-4 mr-2"}),"KI-Design"]})]}),(0,s.jsx)(q,{initialContent:H.richContent||"",onChange:e=>X({...H,richContent:e}),placeholder:"Gestalten Sie hier Ihren Stimmzettel..."}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m._,{className:"text-sm font-medium",children:"Vorschau"}),(0,s.jsx)(f.Zb,{className:"p-4",children:(0,s.jsx)("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:H.richContent||'<p class="text-slate-500">Ihr Stimmzettel-Design wird hier angezeigt...</p>'}})})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(m._,{className:"text-sm font-medium",children:"Editor-Info"}),(0,s.jsx)("p",{className:"text-xs text-slate-600",children:"• Verwenden Sie die Toolbar zum Formatieren von Text, \xdcberschriften und Listen"}),(0,s.jsx)("p",{className:"text-xs text-slate-600",children:"• F\xfcgen Sie Bilder und Links ein f\xfcr professionelle Stimmzettel"}),(0,s.jsx)("p",{className:"text-xs text-slate-600",children:'• "KI-Design" erstellt ein professionelles Design basierend auf dem Wahltyp'})]})]})]}),(0,s.jsxs)(z,{children:[(0,s.jsx)(c.z,{variant:"outline",onClick:()=>P(!1),children:"Abbrechen"}),(0,s.jsx)(c.z,{onClick:$,children:"Wahl erstellen"})]})]})]})]}),K?(0,s.jsx)("div",{className:"flex justify-center py-12",children:(0,s.jsx)("div",{className:"animate-pulse text-slate-500",children:"Wahlen werden geladen..."})}):0===y.length?(0,s.jsx)(f.Zb,{className:"text-center py-12",children:(0,s.jsxs)(f.aY,{children:[(0,s.jsx)(D.Z,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-medium text-slate-700 mb-2",children:"Keine Wahlen vorhanden"}),(0,s.jsx)("p",{className:"text-slate-500 mb-4",children:"Erstellen Sie Ihre erste Wahl, um loszulegen."}),(0,s.jsxs)(c.z,{onClick:()=>P(!0),children:[(0,s.jsx)(W.Z,{className:"h-4 w-4 mr-2"}),"Erste Wahl erstellen"]})]})}):(0,s.jsx)("div",{className:"grid gap-4",children:y.map(e=>(0,s.jsxs)(f.Zb,{className:"hover:shadow-md transition-shadow",children:[(0,s.jsx)(f.Ol,{className:"pb-2",children:(0,s.jsxs)("div",{className:"flex items-start justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)(f.ll,{className:"text-lg",children:e.title}),(0,s.jsx)(f.SZ,{className:"mt-1",children:e.question})]}),en(e.status)]})}),(0,s.jsxs)(f.aY,{children:[(0,s.jsxs)("div",{className:"flex items-center gap-6 text-sm text-slate-600 mb-4",children:[(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(_.Z,{className:"h-4 w-4"}),(0,v.mn)(e.electionDate)]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(O.Z,{className:"h-4 w-4"}),e.maxVoters," Teilnehmer"]}),(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsx)(Z.Z,{className:"h-4 w-4"}),e.options.length," Optionen"]})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)(c.z,{variant:"outline",size:"sm",onClick:()=>p.push("/admin/wahl/".concat(e.id)),children:[(0,s.jsx)(L.Z,{className:"h-4 w-4 mr-1"}),"Details"]}),"draft"===e.status&&(0,s.jsxs)(c.z,{variant:"outline",size:"sm",onClick:()=>p.push("/admin/wahl/".concat(e.id,"/codes")),children:[(0,s.jsx)(R.Z,{className:"h-4 w-4 mr-1"}),"Stimmzettel"]}),("active"===e.status||"closed"===e.status)&&(0,s.jsxs)(c.z,{variant:"outline",size:"sm",onClick:()=>p.push("/admin/wahl/".concat(e.id,"/ergebnis")),children:[(0,s.jsx)(F.Z,{className:"h-4 w-4 mr-1"}),"Ergebnis"]})]})]})]},e.id))})]})]}):null}},575:function(e,t,n){"use strict";n.d(t,{d:function(){return l},z:function(){return d}});var s=n(3827),i=n(64090),a=n(59143),r=n(49769),o=n(22169);let l=(0,r.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=i.forwardRef((e,t)=>{let{className:n,variant:i,size:r,asChild:d=!1,...c}=e,u=d?a.g7:"button";return(0,s.jsx)(u,{className:(0,o.cn)(l({variant:i,size:r,className:n})),ref:t,...c})});d.displayName="Button"},15671:function(e,t,n){"use strict";n.d(t,{Ol:function(){return o},SZ:function(){return d},Zb:function(){return r},aY:function(){return c},ll:function(){return l}});var s=n(3827),i=n(64090),a=n(22169);let r=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",n),...i})});r.displayName="Card";let o=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",n),...i})});o.displayName="CardHeader";let l=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,s.jsx)("h3",{ref:t,className:(0,a.cn)("text-2xl font-semibold leading-none tracking-tight",n),...i})});l.displayName="CardTitle";let d=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,s.jsx)("p",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",n),...i})});d.displayName="CardDescription";let c=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",n),...i})});c.displayName="CardContent",i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",n),...i})}).displayName="CardFooter"},22782:function(e,t,n){"use strict";n.d(t,{I:function(){return r}});var s=n(3827),i=n(64090),a=n(22169);let r=i.forwardRef((e,t)=>{let{className:n,type:i,...r}=e;return(0,s.jsx)("input",{type:i,className:(0,a.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...r})});r.displayName="Input"},12647:function(e,t,n){"use strict";n.d(t,{_:function(){return d}});var s=n(3827),i=n(64090),a=n(76028),r=n(49769),o=n(22169);let l=(0,r.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,s.jsx)(a.f,{ref:t,className:(0,o.cn)(l(),n),...i})});d.displayName=a.f.displayName},86468:function(e,t,n){"use strict";n.d(t,{r:function(){return o}});var s=n(3827),i=n(64090),a=n(94845),r=n(22169);let o=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,s.jsx)(a.fC,{className:(0,r.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...i,ref:t,children:(0,s.jsx)(a.bU,{className:(0,r.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});o.displayName=a.fC.displayName},3549:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});var s=n(3827),i=n(64090),a=n(22169);let r=i.forwardRef((e,t)=>{let{className:n,...i}=e;return(0,s.jsx)("textarea",{className:(0,a.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",n),ref:t,...i})});r.displayName="Textarea"},77147:function(e,t,n){"use strict";n.d(t,{pm:function(){return m}});var s=n(64090);let i=0,a=new Map,r=e=>{if(a.has(e))return;let t=setTimeout(()=>{a.delete(e),c({type:"REMOVE_TOAST",toastId:e})},1e6);a.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:n}=t;return n?r(n):e.toasts.forEach(e=>{r(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===n||void 0===n?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function c(e){d=o(d,e),l.forEach(e=>{e(d)})}function u(e){let{...t}=e,n=(i=(i+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>c({type:"DISMISS_TOAST",toastId:n});return c({type:"ADD_TOAST",toast:{...t,id:n,open:!0,onOpenChange:e=>{e||s()}}}),{id:n,dismiss:s,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:n}})}}function m(){let[e,t]=s.useState(d);return s.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},18628:function(e,t,n){"use strict";n.r(t),n.d(t,{AuthProvider:function(){return l},useAuth:function(){return d}});var s=n(3827),i=n(64090),a=n(1221),r=n(58121);let o=(0,i.createContext)(void 0);function l(e){let{children:t}=e,[n,l]=(0,i.useState)(null),[d,c]=(0,i.useState)(!0);(0,i.useEffect)(()=>{let e=localStorage.getItem("vereins-wahlen-auth");if(e)try{let t=JSON.parse(e);l(t)}catch(e){localStorage.removeItem("vereins-wahlen-auth")}c(!1)},[]);let u=async(e,t)=>{try{var n,s;let i=(0,r.hJ)(a.db,"associations"),o=(0,r.IO)(i,(0,r.ar)("vereinsNummer","==",e),(0,r.ar)("password","==",t)),d=await (0,r.PL)(o);if(d.empty)return!1;let c=d.docs[0],u=c.data(),m={id:c.id,vereinsNummer:u.vereinsNummer,name:u.name||"",address:u.address,email:u.email,phone:u.phone,createdAt:(null===(n=u.createdAt)||void 0===n?void 0:n.toDate())||new Date,updatedAt:(null===(s=u.updatedAt)||void 0===s?void 0:s.toDate())||new Date};return l(m),localStorage.setItem("vereins-wahlen-auth",JSON.stringify(m)),!0}catch(e){return console.error("Login error:",e),!1}};return(0,s.jsx)(o.Provider,{value:{association:n,isAuthenticated:!!n,isLoading:d,login:u,logout:()=>{l(null),localStorage.removeItem("vereins-wahlen-auth")}},children:t})}function d(){let e=(0,i.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},1221:function(e,t,n){"use strict";n.d(t,{db:function(){return o}});var s=n(26142),i=n(58121),a=n(92730);let r=0===(0,s.C6)().length?(0,s.ZF)({apiKey:"AIzaSyAxCOm_i6somJu1nYjUXx2bYpySyWtXXiI",authDomain:"voting-d4906.firebaseapp.com",projectId:"voting-d4906",storageBucket:"voting-d4906.firebasestorage.app",messagingSenderId:"980484045148",appId:"1:980484045148:web:24f68f28a0d46b9f016999"}):(0,s.C6)()[0],o=(0,i.ad)(r);(0,a.v0)(r)},22169:function(e,t,n){"use strict";n.d(t,{YG:function(){return r},cn:function(){return a},mn:function(){return l},p6:function(){return o}});var s=n(75504),i=n(51367);function a(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,i.m6)((0,s.W)(t))}function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4,t="ABCDEFGHJKLMNPQRSTUVWXYZ23456789",n="";for(let s=0;s<e;s++)n+=t.charAt(Math.floor(Math.random()*t.length));return n}function o(e){return new Intl.DateTimeFormat("de-DE",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}).format(e)}function l(e){return new Intl.DateTimeFormat("de-DE",{day:"2-digit",month:"2-digit",year:"numeric"}).format(e)}}},function(e){e.O(0,[358,315,581,995,420,570,437,971,69,744],function(){return e(e.s=1244)}),_N_E=e.O()}]);