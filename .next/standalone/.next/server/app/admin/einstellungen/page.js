(()=>{var e={};e.id=508,e.ids=[508],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},63989:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>h,pages:()=>c,routeModule:()=>m,tree:()=>d});var t=r(50482),a=r(69108),n=r(62563),l=r.n(n),i=r(68300),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(s,o);let d=["",{children:["admin",{children:["einstellungen",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,2691)),"C:\\Users\\Heidenreich\\CascadeProjects\\vereins-wahlen\\src\\app\\admin\\einstellungen\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,85306)),"C:\\Users\\Heidenreich\\CascadeProjects\\vereins-wahlen\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Heidenreich\\CascadeProjects\\vereins-wahlen\\src\\app\\admin\\einstellungen\\page.tsx"],h="/admin/einstellungen/page",x={require:r,loadChunk:()=>Promise.resolve()},m=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/einstellungen/page",pathname:"/admin/einstellungen",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},63802:(e,s,r)=>{Promise.resolve().then(r.bind(r,2234))},2234:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>b});var t=r(95344),a=r(3729),n=r(8428),l=r(86671),i=r(81012),o=r(48414),d=r(5094),c=r(46540),h=r(5426),x=r(2690),m=r(12772),u=r(23673),p=r(39769),g=r(63024),j=r(53148),v=r(31498);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let f=(0,r(69224).Z)("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);var w=r(70009);function b(){let{association:e,isAuthenticated:s,isLoading:r}=(0,l.useAuth)(),b=(0,n.useRouter)(),{toast:y}=(0,p.pm)(),[N,C]=(0,a.useState)(!1),[k,S]=(0,a.useState)(!1),[q,z]=(0,a.useState)({name:"",address:"",email:"",phone:""}),[_,F]=(0,a.useState)({showLogo:!0,showHeader:!0,showFooter:!0,headerText:"",footerText:"",backgroundColor:"#ffffff",textColor:"#1e293b",logoUrl:"",customStyles:""});(0,a.useEffect)(()=>{r||s||b.push("/")},[r,s,b]),(0,a.useEffect)(()=>{e&&(z({name:e.name||"",address:e.address||"",email:e.email||"",phone:e.phone||""}),F(e.ballotTemplate||{showLogo:!0,showHeader:!0,showFooter:!0,headerText:"",footerText:"",backgroundColor:"#ffffff",textColor:"#1e293b",logoUrl:"",customStyles:""}))},[e]);let V=async()=>{if(e){C(!0);try{let s=(0,o.JU)(i.db,"associations",e.id);await (0,o.r7)(s,{name:q.name,address:q.address,email:q.email,phone:q.phone,ballotTemplate:_,updatedAt:o.EK.now()}),y({title:"Gespeichert",description:"Die Vereinsdaten und Vorlage wurden aktualisiert."});let r=localStorage.getItem("vereins-wahlen-auth");if(r){let e=JSON.parse(r);e.name=q.name,e.address=q.address,e.email=q.email,e.phone=q.phone,e.ballotTemplate=_,localStorage.setItem("vereins-wahlen-auth",JSON.stringify(e))}}catch(e){console.error("Error saving:",e),y({title:"Fehler",description:"Die Daten konnten nicht gespeichert werden.",variant:"destructive"})}finally{C(!1)}}};return r?t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsx("div",{className:"animate-pulse text-slate-500",children:"Laden..."})}):e?(0,t.jsxs)("div",{className:"min-h-screen bg-slate-50",children:[t.jsx("header",{className:"border-b bg-white sticky top-0 z-50",children:t.jsx("div",{className:"container mx-auto px-4 py-4",children:(0,t.jsxs)(d.z,{variant:"ghost",onClick:()=>b.push("/admin"),children:[t.jsx(g.Z,{className:"h-4 w-4 mr-2"}),"Zur\xfcck zum Dashboard"]})})}),(0,t.jsxs)("main",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Vereinseinstellungen"}),t.jsx("p",{className:"text-slate-600",children:"Verwalten Sie Ihre Vereinsdaten und Stimmzettel-Vorlagen"})]}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsxs)(d.z,{variant:"outline",onClick:()=>S(!k),children:[t.jsx(j.Z,{className:"h-4 w-4 mr-2"}),k?"Editor":"Vorschau"]}),(0,t.jsxs)(d.z,{onClick:V,disabled:N,children:[t.jsx(v.Z,{className:"h-4 w-4 mr-2"}),N?"Speichern...":"Speichern"]})]})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,t.jsxs)(u.Zb,{children:[t.jsx(u.Ol,{children:(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[t.jsx(f,{className:"h-6 w-6 text-slate-400"}),(0,t.jsxs)("div",{children:[t.jsx(u.ll,{children:"Vereinsdaten"}),t.jsx(u.SZ,{children:"Diese Informationen erscheinen auf exportierten Dokumenten."})]})]})}),(0,t.jsxs)(u.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(h._,{htmlFor:"vereinsNummer",children:"Vereinsnummer"}),t.jsx(c.I,{id:"vereinsNummer",value:e.vereinsNummer,disabled:!0,className:"bg-slate-50"}),t.jsx("p",{className:"text-xs text-slate-500",children:"Die Vereinsnummer kann nicht ge\xe4ndert werden."})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(h._,{htmlFor:"name",children:"Vereinsname"}),t.jsx(c.I,{id:"name",placeholder:"z.B. Sportverein Musterstadt e.V.",value:q.name,onChange:e=>z({...q,name:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(h._,{htmlFor:"address",children:"Adresse"}),t.jsx(c.I,{id:"address",placeholder:"Stra\xdfe und Hausnummer",value:q.address,onChange:e=>z({...q,address:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(h._,{htmlFor:"email",children:"E-Mail"}),t.jsx(c.I,{id:"email",type:"email",placeholder:"kontakt@verein.de",value:q.email,onChange:e=>z({...q,email:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(h._,{htmlFor:"phone",children:"Telefon"}),t.jsx(c.I,{id:"phone",type:"tel",placeholder:"+49 123 456789",value:q.phone,onChange:e=>z({...q,phone:e.target.value})})]})]})]}),k?(0,t.jsxs)(u.Zb,{children:[(0,t.jsxs)(u.Ol,{children:[(0,t.jsxs)(u.ll,{className:"flex items-center gap-2",children:[t.jsx(j.Z,{className:"h-5 w-5"}),"Stimmzettel-Vorschau"]}),t.jsx(u.SZ,{children:"So wird der Stimmzettel gedruckt."})]}),t.jsx(u.aY,{children:(()=>{let e=`
      .ballot-preview {
        background-color: ${_.backgroundColor};
        color: ${_.textColor};
        padding: 2rem;
        border: 2px solid #e2e8f0;
        border-radius: 8px;
        max-width: 400px;
        margin: 0 auto;
        font-family: Arial, sans-serif;
        ${_.customStyles}
      }
      .ballot-preview h2 {
        margin: 0 0 1rem 0;
        font-size: 1.5rem;
        font-weight: bold;
      }
      .ballot-preview p {
        margin: 0.5rem 0;
        line-height: 1.5;
      }
      .ballot-preview .qr-section {
        border-top: 2px solid ${_.textColor};
        border-bottom: 2px solid ${_.textColor};
        padding: 1rem 0;
        margin: 1rem 0;
        text-align: center;
      }
      .ballot-preview .footer {
        font-size: 0.75rem;
        opacity: 0.7;
        margin-top: 1rem;
      }
    `;return(0,t.jsxs)("div",{className:"ballot-preview",children:[t.jsx("style",{children:e}),_.showLogo&&t.jsx("div",{className:"text-center mb-4",children:_.logoUrl?t.jsx("img",{src:_.logoUrl,alt:"Logo",className:"h-16 mx-auto"}):t.jsx("div",{className:"h-16 bg-gray-200 rounded flex items-center justify-center text-gray-500",children:"Logo"})}),_.showHeader&&_.headerText&&t.jsx("div",{className:"text-center mb-4",children:t.jsx("p",{children:_.headerText})}),t.jsx("h2",{children:"Beispiel-Wahl"}),t.jsx("p",{children:"Dies ist eine Beispielabstimmung zur Vorschau der Vorlage."}),(0,t.jsxs)("div",{className:"qr-section",children:[t.jsx("p",{children:"QR-Code Bereich"}),t.jsx("div",{className:"bg-gray-200 w-32 h-32 mx-auto rounded flex items-center justify-center",children:"QR"}),t.jsx("p",{className:"text-sm mt-2",children:"Code: ABCD"})]}),_.showFooter&&_.footerText&&t.jsx("div",{className:"footer text-center",children:t.jsx("p",{children:_.footerText})}),t.jsx("div",{className:"footer text-center",children:t.jsx("p",{children:"Stimmzettel 1 von 100"})})]})})()})]}):(0,t.jsxs)(u.Zb,{children:[(0,t.jsxs)(u.Ol,{children:[(0,t.jsxs)(u.ll,{className:"flex items-center gap-2",children:[t.jsx(w.Z,{className:"h-5 w-5"}),"Stimmzettel-Vorlage"]}),t.jsx(u.SZ,{children:"Gestalten Sie das Aussehen Ihrer gedruckten Stimmzettel."})]}),(0,t.jsxs)(u.aY,{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(h._,{htmlFor:"backgroundColor",children:"Hintergrundfarbe"}),t.jsx(c.I,{id:"backgroundColor",type:"color",value:_.backgroundColor,onChange:e=>F({..._,backgroundColor:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(h._,{htmlFor:"textColor",children:"Textfarbe"}),t.jsx(c.I,{id:"textColor",type:"color",value:_.textColor,onChange:e=>F({..._,textColor:e.target.value})})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(h._,{htmlFor:"logoUrl",children:"Logo-URL"}),t.jsx(c.I,{id:"logoUrl",placeholder:"https://example.com/logo.png",value:_.logoUrl,onChange:e=>F({..._,logoUrl:e.target.value})}),t.jsx("p",{className:"text-xs text-slate-500",children:"URL zu Ihrem Vereinslogo (optional)"})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx(h._,{htmlFor:"showLogo",children:"Logo anzeigen"}),t.jsx(m.r,{id:"showLogo",checked:_.showLogo,onCheckedChange:e=>F({..._,showLogo:e})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx(h._,{htmlFor:"showHeader",children:"Kopfzeile anzeigen"}),t.jsx(m.r,{id:"showHeader",checked:_.showHeader,onCheckedChange:e=>F({..._,showHeader:e})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[t.jsx(h._,{htmlFor:"showFooter",children:"Fu\xdfzeile anzeigen"}),t.jsx(m.r,{id:"showFooter",checked:_.showFooter,onCheckedChange:e=>F({..._,showFooter:e})})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(h._,{htmlFor:"headerText",children:"Kopfzeilentext"}),t.jsx(x.g,{id:"headerText",placeholder:"Willkommen zur Wahl des Vereins...",value:_.headerText,onChange:e=>F({..._,headerText:e.target.value}),rows:3})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(h._,{htmlFor:"footerText",children:"Fu\xdfzeilentext"}),t.jsx(x.g,{id:"footerText",placeholder:"Diese Wahl wird anonym durchgef\xfchrt...",value:_.footerText,onChange:e=>F({..._,footerText:e.target.value}),rows:3})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[t.jsx(h._,{htmlFor:"customStyles",children:"Benutzerdefinierte CSS"}),t.jsx(x.g,{id:"customStyles",placeholder:".custom-class { font-weight: bold; }",value:_.customStyles,onChange:e=>F({..._,customStyles:e.target.value}),rows:6,className:"font-mono text-sm"}),t.jsx("p",{className:"text-xs text-slate-500",children:"Zus\xe4tzliches CSS f\xfcr erweiterte Anpassungen (f\xfcr Fortgeschrittene)"})]})]})]})]}),(0,t.jsxs)(u.Zb,{className:"mt-6",children:[t.jsx(u.Ol,{children:t.jsx(u.ll,{children:"Hinweise"})}),(0,t.jsxs)(u.aY,{className:"space-y-2 text-sm text-slate-600",children:[t.jsx("p",{children:"• Die Vorlage wird f\xfcr alle zuk\xfcnftigen Wahlen verwendet"}),t.jsx("p",{children:"• QR-Codes werden immer gedruckt, Links mit Codes sind optional"}),t.jsx("p",{children:"• \xc4nderungen wirken sich nur auf neue Wahlen aus"}),t.jsx("p",{children:"• Verwenden Sie die Vorschau um das Ergebnis zu pr\xfcfen"}),(0,t.jsxs)("p",{children:[t.jsx("strong",{children:"Datenschutz:"})," Nach der Auswertung werden alle Abstimmungsdaten (Codes und Stimmen) unwiderruflich gel\xf6scht. Es bleiben nur die aggregierten Ergebnisse."]}),(0,t.jsxs)("p",{children:[t.jsx("strong",{children:"Serverstandort:"})," Alle Daten werden auf Servern in der Europ\xe4ischen Union gespeichert (DSGVO-konform)."]})]})]})]})]}):null}},2691:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>n,__esModule:()=>a,default:()=>l});let t=(0,r(86843).createProxy)(String.raw`C:\Users\Heidenreich\CascadeProjects\vereins-wahlen\src\app\admin\einstellungen\page.tsx`),{__esModule:a,$$typeof:n}=t,l=t.default}};var s=require("../../../webpack-runtime.js");s.C(e);var r=e=>s(s.s=e),t=s.X(0,[283,425,922],()=>r(63989));module.exports=t})();