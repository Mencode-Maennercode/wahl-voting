(()=>{var e={};e.id=3,e.ids=[3],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},9523:e=>{"use strict";e.exports=require("dns")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},85158:e=>{"use strict";e.exports=require("http2")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},22037:e=>{"use strict";e.exports=require("os")},71017:e=>{"use strict";e.exports=require("path")},85477:e=>{"use strict";e.exports=require("punycode")},12781:e=>{"use strict";e.exports=require("stream")},24404:e=>{"use strict";e.exports=require("tls")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},7422:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>r.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>h,tree:()=>d});var i=s(50482),a=s(69108),n=s(62563),r=s.n(n),l=s(68300),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,85557)),"C:\\Users\\Heidenreich\\CascadeProjects\\vereins-wahlen\\src\\app\\admin\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,85306)),"C:\\Users\\Heidenreich\\CascadeProjects\\vereins-wahlen\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\Heidenreich\\CascadeProjects\\vereins-wahlen\\src\\app\\admin\\page.tsx"],u="/admin/page",p={require:s,loadChunk:()=>Promise.resolve()},h=new i.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/page",pathname:"/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},95267:(e,t,s)=>{Promise.resolve().then(s.bind(s,72422))},50340:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,s(69224).Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},64290:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,s(69224).Z)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},53148:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,s(69224).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},69599:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,s(69224).Z)("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]])},38271:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,s(69224).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},89895:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,s(69224).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},15997:(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let i=(0,s(69224).Z)("Vote",[["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}],["path",{d:"M5 7c0-1.1.9-2 2-2h10a2 2 0 0 1 2 2v12H5V7Z",key:"1ezoue"}],["path",{d:"M22 19H2",key:"nuriw5"}]])},53267:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return n}});let i=s(39694);s(95344),s(3729);let a=i._(s(60546));function n(e,t){let s={loading:e=>{let{error:t,isLoading:s,pastDelay:i}=e;return null}};return"function"==typeof e&&(s.loader=e),(0,a.default)({...s,...t})}("function"==typeof t.default||"object"==typeof t.default&&null!==t.default)&&void 0===t.default.__esModule&&(Object.defineProperty(t.default,"__esModule",{value:!0}),Object.assign(t.default,t),e.exports=t.default)},38354:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"BailoutToCSR",{enumerable:!0,get:function(){return a}});let i=s(63689);function a(e){let{reason:t,children:s}=e;throw new i.BailoutToCSRError(t)}},60546:(e,t,s)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"default",{enumerable:!0,get:function(){return o}});let i=s(95344),a=s(3729),n=s(38354);function r(e){var t;return{default:null!=(t=null==e?void 0:e.default)?t:e}}let l={loader:()=>Promise.resolve(r(()=>null)),loading:null,ssr:!0},o=function(e){let t={...l,...e},s=(0,a.lazy)(()=>t.loader().then(r)),o=t.loading;function d(e){let r=o?(0,i.jsx)(o,{isLoading:!0,pastDelay:!0,error:null}):null,l=t.ssr?(0,i.jsx)(s,{...e}):(0,i.jsx)(n.BailoutToCSR,{reason:"next/dynamic",children:(0,i.jsx)(s,{...e})});return(0,i.jsx)(a.Suspense,{fallback:r,children:l})}return d.displayName="LoadableComponent",d}},72422:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>H});var i=s(95344),a=s(3729),n=s(53267),r=s.n(n),l=s(8428),o=s(86671),d=s(81012),c=s(48414),u=s(5094),p=s(46540),h=s(5426),x=s(2690),m=s(12772),f=s(23673),g=s(10562),b=s(14513),v=s(11453);let y=g.fC,j=g.xz,w=g.h_;g.x8;let k=a.forwardRef(({className:e,...t},s)=>i.jsx(g.aV,{ref:s,className:(0,v.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));k.displayName=g.aV.displayName;let N=a.forwardRef(({className:e,children:t,...s},a)=>(0,i.jsxs)(w,{children:[i.jsx(k,{}),(0,i.jsxs)(g.VY,{ref:a,className:(0,v.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...s,children:[t,(0,i.jsxs)(g.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[i.jsx(b.Z,{className:"h-4 w-4"}),i.jsx("span",{className:"sr-only",children:"Schlie\xdfen"})]})]})]}));N.displayName=g.VY.displayName;let z=({className:e,...t})=>i.jsx("div",{className:(0,v.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});z.displayName="DialogHeader";let C=({className:e,...t})=>i.jsx("div",{className:(0,v.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});C.displayName="DialogFooter";let S=a.forwardRef(({className:e,...t},s)=>i.jsx(g.Dx,{ref:s,className:(0,v.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));S.displayName=g.Dx.displayName;let q=a.forwardRef(({className:e,...t},s)=>i.jsx(g.dk,{ref:s,className:(0,v.cn)("text-sm text-muted-foreground",e),...t}));q.displayName=g.dk.displayName;var V=s(39769),_=s(15997),W=s(69224);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let M=(0,W.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),D=(0,W.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),P=(0,W.Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);var I=s(38271);/**
 * @license lucide-react v0.330.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let Z=(0,W.Z)("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),T=(0,W.Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);var E=s(89895),L=s(64290),A=s(53148),R=s(69599),$=s(50340);let O=r()(async()=>{},{loadableGenerated:{modules:["C:\\Users\\Heidenreich\\CascadeProjects\\vereins-wahlen\\src\\app\\admin\\page.tsx -> @/components/ui/TemplateEditor"]},ssr:!1,loading:()=>i.jsx("div",{className:"border border-slate-200 rounded-lg h-[300px] flex items-center justify-center text-slate-500",children:"Laden..."})});function H(){let{association:e,isAuthenticated:t,isLoading:s,logout:n}=(0,o.useAuth)(),r=(0,l.useRouter)(),{toast:g}=(0,V.pm)(),[b,w]=(0,a.useState)([]),[k,W]=(0,a.useState)(!0),[H,B]=(0,a.useState)(!1),[F,K]=(0,a.useState)(null),[G,U]=(0,a.useState)({title:"",description:"",question:"",options:[{id:"1",text:"",order:0},{id:"2",text:"",order:1}],allowInvalidVotes:!0,electionDate:"",maxVoters:50,invitationText:"Sie sind herzlich eingeladen, an der Abstimmung teilzunehmen. Bitte scannen Sie den QR-Code oder geben Sie den Code auf der Webseite ein.",showLinkWithCode:!1}),[Y,Q]=(0,a.useState)({showLogo:!0,showHeader:!0,showFooter:!0,headerText:"",footerText:"",backgroundColor:"#ffffff",textColor:"#1e293b",logoUrl:"",customStyles:"",richContent:""});(0,a.useEffect)(()=>{s||t||r.push("/")},[s,t,r]),(0,a.useEffect)(()=>{e&&(J(),Q(e.ballotTemplate||{showLogo:!0,showHeader:!0,showFooter:!0,headerText:"",footerText:"",backgroundColor:"#ffffff",textColor:"#1e293b",logoUrl:"",customStyles:"",richContent:""}))},[e]);let J=async()=>{if(e)try{let t=(0,c.hJ)(d.db,"elections"),s=(0,c.IO)(t,(0,c.ar)("associationId","==",e.id)),i=await (0,c.PL)(s),a=[];i.forEach(e=>{let t=e.data(),s={id:e.id,associationId:t.associationId,title:t.title,description:t.description,question:t.question,options:t.options,allowInvalidVotes:t.allowInvalidVotes,electionDate:t.electionDate?.toDate()||new Date,maxVoters:t.maxVoters,invitationText:t.invitationText,showLinkWithCode:t.showLinkWithCode||!1,status:t.status,codesGenerated:t.codesGenerated,createdAt:t.createdAt?.toDate()||new Date,updatedAt:t.updatedAt?.toDate()||new Date};a.push(s)}),w(a.sort((e,t)=>t.createdAt.getTime()-e.createdAt.getTime()))}catch(e){console.error("Error loading elections:",e),g({title:"Fehler beim Laden",description:"Wahlen konnten nicht geladen werden.",variant:"destructive"})}finally{W(!1)}},X=async()=>{if(e){if(!G.title||!G.question||G.options.some(e=>!e.text)){g({title:"Felder ausf\xfcllen",description:"Bitte f\xfcllen Sie alle Pflichtfelder aus.",variant:"destructive"});return}try{let t={associationId:e.id,title:G.title,description:G.description,question:G.question,options:G.options.map((e,t)=>({...e,order:t})),allowInvalidVotes:G.allowInvalidVotes,electionDate:c.EK.fromDate(new Date(G.electionDate)),maxVoters:G.maxVoters,invitationText:G.invitationText,showLinkWithCode:G.showLinkWithCode,status:"draft",codesGenerated:!1,createdAt:c.EK.now(),updatedAt:c.EK.now()};await (0,c.ET)((0,c.hJ)(d.db,"elections"),t),g({title:"Wahl erstellt",description:"Die Wahl wurde erfolgreich erstellt."}),B(!1),U({title:"",description:"",question:"",options:[{id:"1",text:"",order:0},{id:"2",text:"",order:1}],allowInvalidVotes:!0,electionDate:"",maxVoters:50,invitationText:"Sie sind herzlich eingeladen, an der Abstimmung teilzunehmen. Bitte scannen Sie den QR-Code oder geben Sie den Code auf der Webseite ein.",showLinkWithCode:!1}),J()}catch(e){console.error("Error creating election:",e),g({title:"Fehler",description:"Die Wahl konnte nicht erstellt werden.",variant:"destructive"})}}},ee=e=>{if(G.options.length<=2)return;let t=G.options.filter((t,s)=>s!==e);U({...G,options:t})},et=(e,t)=>{let s=[...G.options];s[e].text=t,U({...G,options:s})},es=e=>{let t={draft:"bg-slate-100 text-slate-700",active:"bg-green-100 text-green-700",closed:"bg-amber-100 text-amber-700",evaluated:"bg-blue-100 text-blue-700"};return i.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t[e]||t.draft}`,children:{draft:"Entwurf",active:"Aktiv",closed:"Geschlossen",evaluated:"Ausgewertet"}[e]||e})};return s?i.jsx("div",{className:"min-h-screen flex items-center justify-center",children:i.jsx("div",{className:"animate-pulse text-slate-500",children:"Laden..."})}):t?(0,i.jsxs)("div",{className:"min-h-screen bg-slate-50",children:[i.jsx("header",{className:"border-b bg-white sticky top-0 z-50",children:(0,i.jsxs)("div",{className:"container mx-auto px-4 py-4 flex items-center justify-between",children:[(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[i.jsx(_.Z,{className:"h-6 w-6 text-slate-700"}),i.jsx("span",{className:"font-semibold text-slate-800",children:"Vereins-Wahlen"}),e&&(0,i.jsxs)("span",{className:"text-slate-500 text-sm ml-2",children:["| ",e.name||e.vereinsNummer]})]}),(0,i.jsxs)("div",{className:"flex items-center gap-2",children:[(0,i.jsxs)(u.z,{variant:"ghost",size:"sm",onClick:()=>r.push("/admin/einstellungen"),children:[i.jsx(M,{className:"h-4 w-4 mr-1"}),"Einstellungen"]}),(0,i.jsxs)(u.z,{variant:"ghost",size:"sm",onClick:()=>{n(),r.push("/")},children:[i.jsx(D,{className:"h-4 w-4 mr-1"}),"Abmelden"]})]})]})}),(0,i.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,i.jsxs)("div",{children:[i.jsx("h1",{className:"text-2xl font-bold text-slate-800",children:"Wahlen verwalten"}),i.jsx("p",{className:"text-slate-600",children:"Erstellen und verwalten Sie Ihre Vereinswahlen"})]}),(0,i.jsxs)(y,{open:H,onOpenChange:B,children:[i.jsx(j,{asChild:!0,children:(0,i.jsxs)(u.z,{children:[i.jsx(P,{className:"h-4 w-4 mr-2"}),"Neue Wahl erstellen"]})}),(0,i.jsxs)(N,{className:"max-w-4xl max-h-[90vh] overflow-y-auto",children:[(0,i.jsxs)(z,{children:[i.jsx(S,{children:"Neue Wahl erstellen"}),i.jsx(q,{children:"Definieren Sie die Wahlfrage und die m\xf6glichen Antworten."})]}),(0,i.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,i.jsxs)("div",{className:"space-y-4 py-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(h._,{htmlFor:"title",children:"Titel der Wahl *"}),i.jsx(p.I,{id:"title",placeholder:"z.B. Vorstandswahl 2024",value:G.title,onChange:e=>U({...G,title:e.target.value})})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(h._,{htmlFor:"description",children:"Beschreibung"}),i.jsx(x.g,{id:"description",placeholder:"Optionale Beschreibung der Wahl",value:G.description,onChange:e=>U({...G,description:e.target.value})})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(h._,{htmlFor:"question",children:"Wahlfrage *"}),i.jsx(p.I,{id:"question",placeholder:"z.B. Wen w\xe4hlen Sie zum neuen Vorsitzenden?",value:G.question,onChange:e=>U({...G,question:e.target.value})})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(h._,{children:"Antwortm\xf6glichkeiten *"}),G.options.map((e,t)=>(0,i.jsxs)("div",{className:"flex gap-2",children:[i.jsx(p.I,{placeholder:`Option ${t+1}`,value:e.text,onChange:e=>et(t,e.target.value)}),G.options.length>2&&i.jsx(u.z,{type:"button",variant:"ghost",size:"icon",onClick:()=>ee(t),children:i.jsx(I.Z,{className:"h-4 w-4 text-slate-500"})})]},e.id)),(0,i.jsxs)(u.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{let e=(G.options.length+1).toString();U({...G,options:[...G.options,{id:e,text:"",order:G.options.length}]})},children:[i.jsx(P,{className:"h-4 w-4 mr-1"}),"Option hinzuf\xfcgen"]})]}),(0,i.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(h._,{htmlFor:"electionDate",children:"Wahldatum *"}),i.jsx(p.I,{id:"electionDate",type:"datetime-local",value:G.electionDate,onChange:e=>U({...G,electionDate:e.target.value})})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(h._,{htmlFor:"maxVoters",children:"Maximale Teilnehmer"}),i.jsx(p.I,{id:"maxVoters",type:"number",min:1,value:G.maxVoters,onChange:e=>U({...G,maxVoters:parseInt(e.target.value)||50})})]})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(h._,{htmlFor:"invitationText",children:"Einladungstext"}),i.jsx(x.g,{id:"invitationText",placeholder:"Text auf dem Stimmzettel",value:G.invitationText,onChange:e=>U({...G,invitationText:e.target.value}),rows:3})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[(0,i.jsxs)("div",{children:[i.jsx(h._,{htmlFor:"allowInvalid",children:"Ung\xfcltige Stimmen erlauben"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Teilnehmer k\xf6nnen ohne Auswahl abstimmen"})]}),i.jsx(m.r,{id:"allowInvalid",checked:G.allowInvalidVotes,onCheckedChange:e=>U({...G,allowInvalidVotes:e})})]}),(0,i.jsxs)("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[(0,i.jsxs)("div",{children:[i.jsx(h._,{htmlFor:"showLinkWithCode",children:"Link mit Code drucken"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Zus\xe4tzlich zum QR-Code auch Link und Code anzeigen"})]}),i.jsx(m.r,{id:"showLinkWithCode",checked:G.showLinkWithCode,onCheckedChange:e=>U({...G,showLinkWithCode:e})})]})]}),(0,i.jsxs)("div",{className:"space-y-4 py-4",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx(h._,{className:"text-base font-medium",children:"Stimmzettel-Editor"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Erstellen Sie Ihren Stimmzettel wie in Word"})]}),(0,i.jsxs)(u.z,{type:"button",variant:"outline",size:"sm",onClick:()=>{let e=G.title.toLowerCase(),t="";t=e.includes("vorsitz")||e.includes("pr\xe4sident")?`
        <div style="text-align: center; margin-bottom: 30px;">
          <h1 style="color: #1e293b; font-size: 24px; font-weight: bold; margin-bottom: 10px;">
            Wahl des Vereinsvorsitzenden
          </h1>
          <p style="color: #64748b; font-size: 14px;">
            ${G.description||"Ihre Stimme ist wichtig f\xfcr die Zukunft unseres Vereins."}
          </p>
        </div>
        
        <div style="background: #f8fafc; padding: 20px; border-radius: 8px; margin: 20px 0;">
          <h2 style="color: #1e293b; font-size: 18px; margin-bottom: 15px;">Wahlfrage:</h2>
          <p style="color: #334155; font-size: 16px; font-weight: 500;">
            ${G.question}
          </p>
        </div>
        
        <div style="margin: 20px 0;">
          <h3 style="color: #1e293b; font-size: 16px; margin-bottom: 10px;">Kandidaten:</h3>
          ${G.options.map((e,t)=>`
            <div style="display: flex; align-items: center; margin: 10px 0; padding: 10px; background: #ffffff; border: 1px solid #e2e8f0; border-radius: 6px;">
              <span style="display: inline-flex; align-items: center; justify-content: center; width: 30px; height: 30px; background: #3b82f6; color: white; border-radius: 50%; margin-right: 15px; font-weight: bold;">
                ${t+1}
              </span>
              <span style="color: #1e293b; font-size: 15px;">
                ${e.text||"Kandidat "+(t+1)}
              </span>
            </div>
          `).join("")}
        </div>
        
        <div style="margin-top: 30px; padding-top: 20px; border-top: 1px solid #e2e8f0;">
          <p style="color: #64748b; font-size: 12px; text-align: center;">
            Bitte w\xe4hlen Sie eine Option und geben Sie Ihren Stimmzettel ab.
          </p>
        </div>
      `:e.includes("kassier")||e.includes("schatzmeister")?`
        <div style="text-align: center; margin-bottom: 30px;">
          <h1 style="color: #1e293b; font-size: 24px; font-weight: bold; margin-bottom: 10px;">
            Wahl des Kassierers
          </h1>
          <p style="color: #64748b; font-size: 14px;">
            ${G.description||"Verantwortliche Verwaltung der Vereinsfinanzen"}
          </p>
        </div>
        
        <div style="background: #fef3c7; padding: 20px; border-radius: 8px; margin: 20px 0; border-left: 4px solid #f59e0b;">
          <h2 style="color: #92400e; font-size: 18px; margin-bottom: 15px;">Wahlfrage:</h2>
          <p style="color: #78350f; font-size: 16px; font-weight: 500;">
            ${G.question}
          </p>
        </div>
        
        <div style="margin: 20px 0;">
          <h3 style="color: #1e293b; font-size: 16px; margin-bottom: 10px;">Kandidaten:</h3>
          ${G.options.map((e,t)=>`
            <div style="display: flex; align-items: center; margin: 10px 0; padding: 10px; background: #ffffff; border: 1px solid #e2e8f0; border-radius: 6px;">
              <span style="display: inline-flex; align-items: center; justify-content: center; width: 30px; height: 30px; background: #f59e0b; color: white; border-radius: 50%; margin-right: 15px; font-weight: bold;">
                ${t+1}
              </span>
              <span style="color: #1e293b; font-size: 15px;">
                ${e.text||"Kandidat "+(t+1)}
              </span>
            </div>
          `).join("")}
        </div>
      `:`
        <div style="text-align: center; margin-bottom: 30px;">
          <h1 style="color: #1e293b; font-size: 24px; font-weight: bold; margin-bottom: 10px;">
            ${G.title}
          </h1>
          <p style="color: #64748b; font-size: 14px;">
            ${G.description||"Vereinsabstimmung"}
          </p>
        </div>
        
        <div style="background: #f1f5f9; padding: 20px; border-radius: 8px; margin: 20px 0;">
          <h2 style="color: #1e293b; font-size: 18px; margin-bottom: 15px;">Wahlfrage:</h2>
          <p style="color: #334155; font-size: 16px; font-weight: 500;">
            ${G.question}
          </p>
        </div>
        
        <div style="margin: 20px 0;">
          <h3 style="color: #1e293b; font-size: 16px; margin-bottom: 10px;">Optionen:</h3>
          ${G.options.map((e,t)=>`
            <div style="display: flex; align-items: center; margin: 10px 0; padding: 10px; background: #ffffff; border: 1px solid #e2e8f0; border-radius: 6px;">
              <span style="display: inline-flex; align-items: center; justify-content: center; width: 30px; height: 30px; background: #6366f1; color: white; border-radius: 50%; margin-right: 15px; font-weight: bold;">
                ${t+1}
              </span>
              <span style="color: #1e293b; font-size: 15px;">
                ${e.text||"Option "+(t+1)}
              </span>
            </div>
          `).join("")}
        </div>
      `,Q({...Y,richContent:t}),g({title:"KI-Design erstellt",description:"Ein professionelles Design wurde generiert."})},disabled:!G.title,children:[i.jsx(Z,{className:"h-4 w-4 mr-2"}),"KI-Design"]})]}),i.jsx(O,{initialContent:Y.richContent||"",onChange:e=>Q({...Y,richContent:e}),placeholder:"Gestalten Sie hier Ihren Stimmzettel..."}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(h._,{className:"text-sm font-medium",children:"Vorschau"}),i.jsx(f.Zb,{className:"p-4",children:i.jsx("div",{className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:Y.richContent||'<p class="text-slate-500">Ihr Stimmzettel-Design wird hier angezeigt...</p>'}})})]}),(0,i.jsxs)("div",{className:"space-y-2",children:[i.jsx(h._,{className:"text-sm font-medium",children:"Editor-Info"}),i.jsx("p",{className:"text-xs text-slate-600",children:"• Verwenden Sie die Toolbar zum Formatieren von Text, \xdcberschriften und Listen"}),i.jsx("p",{className:"text-xs text-slate-600",children:"• F\xfcgen Sie Bilder und Links ein f\xfcr professionelle Stimmzettel"}),i.jsx("p",{className:"text-xs text-slate-600",children:'• "KI-Design" erstellt ein professionelles Design basierend auf dem Wahltyp'})]})]})]}),(0,i.jsxs)(C,{children:[i.jsx(u.z,{variant:"outline",onClick:()=>B(!1),children:"Abbrechen"}),i.jsx(u.z,{onClick:X,children:"Wahl erstellen"})]})]})]})]}),k?i.jsx("div",{className:"flex justify-center py-12",children:i.jsx("div",{className:"animate-pulse text-slate-500",children:"Wahlen werden geladen..."})}):0===b.length?i.jsx(f.Zb,{className:"text-center py-12",children:(0,i.jsxs)(f.aY,{children:[i.jsx(_.Z,{className:"h-12 w-12 text-slate-300 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-slate-700 mb-2",children:"Keine Wahlen vorhanden"}),i.jsx("p",{className:"text-slate-500 mb-4",children:"Erstellen Sie Ihre erste Wahl, um loszulegen."}),(0,i.jsxs)(u.z,{onClick:()=>B(!0),children:[i.jsx(P,{className:"h-4 w-4 mr-2"}),"Erste Wahl erstellen"]})]})}):i.jsx("div",{className:"grid gap-4",children:b.map(e=>(0,i.jsxs)(f.Zb,{className:"hover:shadow-md transition-shadow",children:[i.jsx(f.Ol,{className:"pb-2",children:(0,i.jsxs)("div",{className:"flex items-start justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx(f.ll,{className:"text-lg",children:e.title}),i.jsx(f.SZ,{className:"mt-1",children:e.question})]}),es(e.status)]})}),(0,i.jsxs)(f.aY,{children:[(0,i.jsxs)("div",{className:"flex items-center gap-6 text-sm text-slate-600 mb-4",children:[(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[i.jsx(T,{className:"h-4 w-4"}),(0,v.mn)(e.electionDate)]}),(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[i.jsx(E.Z,{className:"h-4 w-4"}),e.maxVoters," Teilnehmer"]}),(0,i.jsxs)("div",{className:"flex items-center gap-1",children:[i.jsx(L.Z,{className:"h-4 w-4"}),e.options.length," Optionen"]})]}),(0,i.jsxs)("div",{className:"flex gap-2",children:[(0,i.jsxs)(u.z,{variant:"outline",size:"sm",onClick:()=>r.push(`/admin/wahl/${e.id}`),children:[i.jsx(A.Z,{className:"h-4 w-4 mr-1"}),"Details"]}),"draft"===e.status&&(0,i.jsxs)(u.z,{variant:"outline",size:"sm",onClick:()=>r.push(`/admin/wahl/${e.id}/codes`),children:[i.jsx(R.Z,{className:"h-4 w-4 mr-1"}),"Stimmzettel"]}),("active"===e.status||"closed"===e.status)&&(0,i.jsxs)(u.z,{variant:"outline",size:"sm",onClick:()=>r.push(`/admin/wahl/${e.id}/ergebnis`),children:[i.jsx($.Z,{className:"h-4 w-4 mr-1"}),"Ergebnis"]})]})]})]},e.id))})]})]}):null}},46540:(e,t,s)=>{"use strict";s.d(t,{I:()=>r});var i=s(95344),a=s(3729),n=s(11453);let r=a.forwardRef(({className:e,type:t,...s},a)=>i.jsx("input",{type:t,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:a,...s}));r.displayName="Input"},5426:(e,t,s)=>{"use strict";s.d(t,{_:()=>u});var i=s(95344),a=s(3729);s(81202);var n=s(32751),r=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let s=(0,n.Z8)(`Primitive.${t}`),r=a.forwardRef((e,a)=>{let{asChild:n,...r}=e,l=n?s:t;return(0,i.jsx)(l,{...r,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),l=a.forwardRef((e,t)=>(0,i.jsx)(r.label,{...e,ref:t,onMouseDown:t=>{t.target.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));l.displayName="Label";var o=s(49247),d=s(11453);let c=(0,o.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),u=a.forwardRef(({className:e,...t},s)=>i.jsx(l,{ref:s,className:(0,d.cn)(c(),e),...t}));u.displayName=l.displayName},12772:(e,t,s)=>{"use strict";s.d(t,{r:()=>k});var i=s(95344),a=s(3729),n=s(85222),r=s(31405),l=s(98462),o=s(33183),d=s(92062),c=s(63085),u=s(74141),p="Switch",[h,x]=(0,l.b)(p),[m,f]=h(p),g=a.forwardRef((e,t)=>{let{__scopeSwitch:s,name:l,checked:d,defaultChecked:c,required:h,disabled:x,value:f="on",onCheckedChange:g,form:b,...v}=e,[w,k]=a.useState(null),N=(0,r.e)(t,e=>k(e)),z=a.useRef(!1),C=!w||b||!!w.closest("form"),[S,q]=(0,o.T)({prop:d,defaultProp:c??!1,onChange:g,caller:p});return(0,i.jsxs)(m,{scope:s,checked:S,disabled:x,children:[(0,i.jsx)(u.WV.button,{type:"button",role:"switch","aria-checked":S,"aria-required":h,"data-state":j(S),"data-disabled":x?"":void 0,disabled:x,value:f,...v,ref:N,onClick:(0,n.Mj)(e.onClick,e=>{q(e=>!e),C&&(z.current=e.isPropagationStopped(),z.current||e.stopPropagation())})}),C&&(0,i.jsx)(y,{control:w,bubbles:!z.current,name:l,value:f,checked:S,required:h,disabled:x,form:b,style:{transform:"translateX(-100%)"}})]})});g.displayName=p;var b="SwitchThumb",v=a.forwardRef((e,t)=>{let{__scopeSwitch:s,...a}=e,n=f(b,s);return(0,i.jsx)(u.WV.span,{"data-state":j(n.checked),"data-disabled":n.disabled?"":void 0,...a,ref:t})});v.displayName=b;var y=a.forwardRef(({__scopeSwitch:e,control:t,checked:s,bubbles:n=!0,...l},o)=>{let u=a.useRef(null),p=(0,r.e)(u,o),h=(0,d.D)(s),x=(0,c.t)(t);return a.useEffect(()=>{let e=u.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"checked").set;if(h!==s&&t){let i=new Event("click",{bubbles:n});t.call(e,s),e.dispatchEvent(i)}},[h,s,n]),(0,i.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:s,...l,tabIndex:-1,ref:p,style:{...l.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});function j(e){return e?"checked":"unchecked"}y.displayName="SwitchBubbleInput";var w=s(11453);let k=a.forwardRef(({className:e,...t},s)=>i.jsx(g,{className:(0,w.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...t,ref:s,children:i.jsx(v,{className:(0,w.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));k.displayName=g.displayName},2690:(e,t,s)=>{"use strict";s.d(t,{g:()=>r});var i=s(95344),a=s(3729),n=s(11453);let r=a.forwardRef(({className:e,...t},s)=>i.jsx("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e),ref:s,...t}));r.displayName="Textarea"},85557:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>r});let i=(0,s(86843).createProxy)(String.raw`C:\Users\Heidenreich\CascadeProjects\vereins-wahlen\src\app\admin\page.tsx`),{__esModule:a,$$typeof:n}=i,r=i.default},92062:(e,t,s)=>{"use strict";s.d(t,{D:()=>a});var i=s(3729);function a(e){let t=i.useRef({value:e,previous:e});return i.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}},63085:(e,t,s)=>{"use strict";s.d(t,{t:()=>n});var i=s(3729),a=s(16069);function n(e){let[t,s]=i.useState(void 0);return(0,a.b)(()=>{if(e){s({width:e.offsetWidth,height:e.offsetHeight});let t=new ResizeObserver(t=>{let i,a;if(!Array.isArray(t)||!t.length)return;let n=t[0];if("borderBoxSize"in n){let e=n.borderBoxSize,t=Array.isArray(e)?e[0]:e;i=t.inlineSize,a=t.blockSize}else i=e.offsetWidth,a=e.offsetHeight;s({width:i,height:a})});return t.observe(e,{box:"border-box"}),()=>t.unobserve(e)}s(void 0)},[e]),t}}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),i=t.X(0,[283,146,425],()=>s(7422));module.exports=i})();